# 현재 작업 상태

## 방금 완료한 작업
- ✅ 보스 모달 시간 형식 검증 수정 (HH:MM 형식 정규식 수정)
- ✅ 특정요일 보스 스케줄 계산 개선 (컷타임 없이도 다음 리젠 시간 계산)
- ✅ 참여 시스템 GoogleSheets 연동 오류 수정 (addData → appendData)

## 다음에 할 작업
- [ ] 보스 알림 시스템 최종 테스트
- [ ] 참여 시스템 end-to-end 테스트
- [ ] 중복 참여 체크 로직 검증
- [ ] 에러 핸들링 개선

## 현재 시스템 상태
- **보스 알림 시스템**: ✅ 완료 (1분 스케줄러, 5분전/1분전 알림, 컷버튼, 참여/참여자확인 버튼)
- **참여 시스템**: ✅ 완료 (캐릭터/계정 분리, 부주 시스템 지원, 점수 자동 계산)
- **보스 등록 시스템**: ✅ 완료 (시간마다/특정요일 리젠 지원)
- **스케줄 조회 시스템**: ✅ 완료 (특정요일 보스도 올바른 다음 리젠 시간 표시)

## 주요 파일 구조
```
src/
├── commands/interactions/buttons/
│   ├── cutButton.js           # 컷 버튼 (컷타임 등록 + UI 변환)
│   ├── participationButton.js # 참여 버튼 (참여 기록 + 점수 업데이트)
│   └── participantListButton.js # 참여자 확인 버튼
├── services/
│   ├── schedulerService.js    # 1분 스케줄러 (알림 발송)
│   ├── bossScheduleService.js # 리젠 시간 계산
│   ├── characterService.js    # 캐릭터/계정 관리
│   ├── bossService.js        # 보스 정보 관리
│   └── googleSheetsService.js # Google Sheets 연동
└── commands/interactions/bossModal.js # 보스 등록 모달
```

## 주의사항
- **시간대**: TZ=Asia/Seoul 설정으로 KST 자동 처리
- **특정요일 보스**: 컷타임 없이도 다음 리젠 시간 계산 가능
- **참여 시스템**: 캐릭터ID 기반으로 중복 참여 체크 (컷타임 기준)
- **부주 시스템**: 한 캐릭터에 여러 Discord 계정 연결 가능

## 현재 이슈
- 없음 (모든 주요 기능 구현 완료)

## 데이터베이스 구조 (Google Sheets)
- `보탐봇-보스정보`: 보스 정보 (이름, 점수, 리젠타입, 리젠설정, 노출여부, 컷타임)
- `보탐봇-캐릭터정보`: 캐릭터 정보 (ID, 캐릭터명, 총점수, 생성일시, 수정일시)
- `보탐봇-계정정보`: 계정 정보 (사용자ID, 닉네임, 태그, 캐릭터ID, 캐릭터명, 권한, 계정유형)
- `보탐봇-참여이력`: 참여 기록 (참여일시, 캐릭터ID, 캐릭터명, 실제참여자ID, 보스명, 획득점수, 컷타임)